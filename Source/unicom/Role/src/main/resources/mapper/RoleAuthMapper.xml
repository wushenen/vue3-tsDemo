<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.qtec.unicom.mapper.RoleAuthMapper">

    <insert id="addRoleAuth">
        insert into t_role_auth (role_id,api_id)
        values (#{roleId},#{apiId})
    </insert>

    <select id="existRoleAuth" resultType="boolean">
        select count(1)
        from t_role_auth
        where role_id = #{roleId}
        and api_id = #{apiId}
    </select>

    <delete id="deleteRoleAuthByRoleId">
        delete from
        t_role_auth
        where role_id = #{roleId}
    </delete>

    <delete id="deleteRoleAuthById">
        delete from
        t_role_auth
        where id = #{roleAuthId}
    </delete>

    <select id="getRoleAuth" resultType="com.qtec.unicom.pojo.DTO.RoleAuthInfo">
        SELECT a.id as roleAuthId,
        a.role_id as roleId,
        b.role_code as roleCode,
        a.api_id as apiId,
        c.api_name as apiName,
        a.create_time as createTime,
        a.update_time as updateTime
        from t_role_auth a
        LEFT JOIN t_role b
        ON a.role_id = b.role_id
        LEFT JOIN t_api_resource c
        on a.api_id = c.api_id
        where a.role_id = #{roleId}
    </select>

</mapper>