{"version":3,"sources":["webpack:///./src/views/Version.vue?c7ea","webpack:///src/views/Version.vue","webpack:///./src/views/Version.vue?df46","webpack:///./src/views/Version.vue"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticStyle","attrs","path","_v","on","addVersion","keyList","queryInfo","pagenum","pagesize","total","handleSizeChange","handleCurrentChange","staticRenderFns","component"],"mappings":"uHAAA,IAAIA,EAAS,WAAa,IAAIC,EAAIC,KAASC,EAAGF,EAAIG,eAAmBC,EAAGJ,EAAIK,MAAMD,IAAIF,EAAG,OAAOE,EAAG,MAAM,CAACE,YAAY,CAAC,YAAY,WAAW,CAACF,EAAG,gBAAgB,CAACG,MAAM,CAAC,kBAAkB,wBAAwB,CAACH,EAAG,qBAAqB,CAACG,MAAM,CAAC,GAAK,CAAEC,KAAM,WAAY,CAACR,EAAIS,GAAG,QAAQL,EAAG,qBAAqB,CAACJ,EAAIS,GAAG,aAAaL,EAAG,qBAAqB,CAACG,MAAM,CAAC,GAAK,CAACC,KAAK,cAAc,CAACR,EAAIS,GAAG,UAAUL,EAAG,qBAAqB,CAACJ,EAAIS,GAAG,WAAW,GAAGL,EAAG,UAAU,CAACA,EAAG,SAAS,CAACA,EAAG,YAAY,CAACG,MAAM,CAAC,KAAO,WAAWG,GAAG,CAAC,MAAQV,EAAIW,aAAa,CAACX,EAAIS,GAAG,SAAS,GAAGL,EAAG,WAAW,CAACG,MAAM,CAAC,KAAOP,EAAIY,QAAQ,OAAS,GAAG,OAAS,KAAK,CAACR,EAAG,kBAAkB,CAACG,MAAM,CAAC,KAAO,QAAQ,MAAQ,QAAQH,EAAG,kBAAkB,CAACG,MAAM,CAAC,MAAQ,OAAO,KAAO,QAAQ,yBAAwB,KAAQH,EAAG,kBAAkB,CAACG,MAAM,CAAC,MAAQ,UAAU,KAAO,eAAe,yBAAwB,KAAQH,EAAG,kBAAkB,CAACG,MAAM,CAAC,MAAQ,WAAW,KAAO,mBAAmB,GAAGH,EAAG,gBAAgB,CAACG,MAAM,CAAC,eAAeP,EAAIa,UAAUC,QAAQ,aAAa,CAAC,EAAE,GAAG,GAAG,IAAI,YAAYd,EAAIa,UAAUE,SAAS,OAAS,0CAA0C,MAAQf,EAAIgB,OAAON,GAAG,CAAC,cAAcV,EAAIiB,iBAAiB,iBAAiBjB,EAAIkB,wBAAwB,IAAI,IAC7tCC,EAAkB,G,wBCoCtB,GACE,KADF,WAEI,MAAJ,CACM,UAAN,CACQ,QAAR,EACQ,SAAR,IAEM,QAAN,GACM,MAAN,EACM,MAAN,0BAGE,iBAAF,gBACI,IAAJ,oDACI,GAAJ,QAGM,OAAN,UAFM,KAKJ,QApBF,WAqBI,KAAJ,YAEE,QAAF,CACI,SADJ,WACM,IAAN,OAAM,OAAN,8JACA,uCACA,6EAFA,mBACA,EADA,EACA,KAGA,WAJA,gBAKA,sBACA,qBANA,gDAQA,iCARA,+CAWI,iBAZJ,SAYA,GACM,KAAN,qBACM,KAAN,YAEI,oBAhBJ,SAgBA,GACM,KAAN,oBACM,KAAN,YAEI,WApBJ,WAoBM,IAAN,OAAM,OAAN,gKAEA,WACA,uBACA,uBACA,sBACA,iBAEA,+BARA,UAEA,EAFA,OASA,cATA,iEAYA,wCACA,gBAbA,mBAYA,EAZA,EAYA,KAGA,WAfA,iBAgBA,kCACA,aAjBA,iDAmBA,kDAnBA,iDChFiV,I,YCO7UC,EAAY,eACd,EACArB,EACAoB,GACA,EACA,KACA,KACA,MAIa,aAAAC,E","file":"js/chunk-2d21da71.fb4f1ac3.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticStyle:{\"min-width\":\"1100px\"}},[_c('el-breadcrumb',{attrs:{\"separator-class\":\"el-icon-arrow-right\"}},[_c('el-breadcrumb-item',{attrs:{\"to\":{ path: '/home' }}},[_vm._v(\"首页\")]),_c('el-breadcrumb-item',[_vm._v(\"用户主密钥管理\")]),_c('el-breadcrumb-item',{attrs:{\"to\":{path:'/mainkey'}}},[_vm._v(\"密钥列表\")]),_c('el-breadcrumb-item',[_vm._v(\"密钥版本\")])],1),_c('el-card',[_c('el-row',[_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":_vm.addVersion}},[_vm._v(\"创建\")])],1),_c('el-table',{attrs:{\"data\":_vm.keyList,\"border\":\"\",\"stripe\":\"\"}},[_c('el-table-column',{attrs:{\"type\":\"index\",\"label\":\"序号\"}}),_c('el-table-column',{attrs:{\"label\":\"密钥标识\",\"prop\":\"keyId\",\"show-overflow-tooltip\":true}}),_c('el-table-column',{attrs:{\"label\":\"密钥版本标识符\",\"prop\":\"keyVersionId\",\"show-overflow-tooltip\":true}}),_c('el-table-column',{attrs:{\"label\":\"创建密钥版本日期\",\"prop\":\"creationDate\"}})],1),_c('el-pagination',{attrs:{\"current-page\":_vm.queryInfo.pagenum,\"page-sizes\":[5,10,15,20],\"page-size\":_vm.queryInfo.pagesize,\"layout\":\"total, sizes, prev, pager, next, jumper\",\"total\":_vm.total},on:{\"size-change\":_vm.handleSizeChange,\"current-change\":_vm.handleCurrentChange}})],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div style=\"min-width: 1100px\">\r\n    <el-breadcrumb separator-class=\"el-icon-arrow-right\">\r\n      <el-breadcrumb-item :to=\"{ path: '/home' }\">首页</el-breadcrumb-item>\r\n      <el-breadcrumb-item>用户主密钥管理</el-breadcrumb-item>\r\n      <el-breadcrumb-item :to=\"{path:'/mainkey'}\">密钥列表</el-breadcrumb-item>\r\n      <el-breadcrumb-item>密钥版本</el-breadcrumb-item>\r\n    </el-breadcrumb>\r\n    <el-card>\r\n      <el-row>\r\n        <el-button type=\"primary\" @click=\"addVersion\">创建</el-button>\r\n      </el-row>\r\n      <el-table :data=\"keyList\" border stripe>\r\n        <el-table-column type=\"index\" label=\"序号\"></el-table-column>\r\n        <el-table-column label=\"密钥标识\" prop=\"keyId\" :show-overflow-tooltip=\"true\"></el-table-column>\r\n        <el-table-column label=\"密钥版本标识符\" prop=\"keyVersionId\" :show-overflow-tooltip=\"true\"></el-table-column>\r\n        <el-table-column label=\"创建密钥版本日期\" prop=\"creationDate\"></el-table-column>\r\n        <!--<el-table-column label=\"操作\">-->\r\n          <!--<template slot-scope=\"scope\">-->\r\n            <!--<el-button size=\"mini\" type=\"danger\" plain @click=\"deleOpen(scope.row.keyId)\">删除-->\r\n            <!--</el-button>-->\r\n          <!--</template>-->\r\n        <!--</el-table-column>-->\r\n      </el-table>\r\n      <el-pagination\r\n        @size-change=\"handleSizeChange\"\r\n        @current-change=\"handleCurrentChange\"\r\n        :current-page=\"queryInfo.pagenum\"\r\n        :page-sizes=\"[5,10,15,20]\"\r\n        :page-size=\"queryInfo.pagesize\"\r\n        layout=\"total, sizes, prev, pager, next, jumper\"\r\n        :total=\"total\">\r\n      </el-pagination>\r\n    </el-card>\r\n  </div>\r\n</template>\r\n<script>\r\n  export default {\r\n    data() {\r\n      return {\r\n        queryInfo: {\r\n          pagenum: 1,//当前的页数\r\n          pagesize: 10//当前每页显示多少条数据\r\n        },\r\n        keyList: [],\r\n        total: 0,\r\n        keyId: this.$route.query.keyId\r\n      }\r\n    },\r\n    beforeRouteEnter: (to, form, next) => {\r\n      const loginType = window.sessionStorage.getItem('accountTypeLogin');\r\n      if (loginType === '9') {\r\n        next()\r\n      }else{\r\n        return next('/404')\r\n      }\r\n    },\r\n    created() {\r\n      this.getKeyId();\r\n    },\r\n    methods: {\r\n      async getKeyId() {\r\n        const {data: res} = await this.$http.post('v1/kms/ListKeyVersions', {\r\n          'keyId': this.keyId, 'pageNumber': this.queryInfo.pagenum, 'pageSize': this.queryInfo.pagesize\r\n        });\r\n        if (res.code === 0) {\r\n          this.keyList = res.data.list;\r\n          this.total = res.data.total;\r\n        } else {\r\n          return this.$message.error('获取密钥版本信息失败！')\r\n        }\r\n      },\r\n      handleSizeChange(newSize) {\r\n        this.queryInfo.pagesize = newSize;\r\n        this.getKeyId()\r\n      },\r\n      handleCurrentChange(newPage) {\r\n        this.queryInfo.pagenum = newPage;\r\n        this.getKeyId()\r\n      },\r\n      async addVersion(){\r\n//        console.log(this.keyId)\r\n        const confirmResult = await this.$confirm(\r\n          '确定要创建一个新的密钥版本？', '提示', {\r\n            confirmButtonText: '确定',\r\n            cancelButtontext: '取消',\r\n            type: 'warning',\r\n          }\r\n        ).catch(err => err);\r\n        if (confirmResult !== 'confirm') {\r\n          return\r\n        }\r\n        const {data: res} = await this.$http.post('v1/kms/CreateKeyVersion', {\r\n          'keyId': this.keyId\r\n        });\r\n        if (res.code === 0) {\r\n          this.$message.success(\"创建新的密钥版本成功！\");\r\n          this.getKeyId()\r\n        } else {\r\n          return this.$message.error(res.msg !== '' ? res.msg : '创建新的密钥版本失败！')\r\n        }\r\n      }\r\n    }\r\n  }\r\n</script>\r\n<style>\r\n\r\n</style>\r\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Version.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Version.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Version.vue?vue&type=template&id=e095c85e&\"\nimport script from \"./Version.vue?vue&type=script&lang=js&\"\nexport * from \"./Version.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}