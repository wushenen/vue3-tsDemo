(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d21da71"],{d1e3:function(e,t,r){"use strict";r.r(t);var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticStyle:{"min-width":"1100px"}},[r("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[r("el-breadcrumb-item",{attrs:{to:{path:"/home"}}},[e._v("首页")]),r("el-breadcrumb-item",[e._v("用户主密钥管理")]),r("el-breadcrumb-item",{attrs:{to:{path:"/mainkey"}}},[e._v("密钥列表")]),r("el-breadcrumb-item",[e._v("密钥版本")])],1),r("el-card",[r("el-row",[r("el-button",{attrs:{type:"primary"},on:{click:e.addVersion}},[e._v("创建")])],1),r("el-table",{attrs:{data:e.keyList,border:"",stripe:""}},[r("el-table-column",{attrs:{type:"index",label:"序号"}}),r("el-table-column",{attrs:{label:"密钥标识",prop:"keyId","show-overflow-tooltip":!0}}),r("el-table-column",{attrs:{label:"密钥版本标识符",prop:"keyVersionId","show-overflow-tooltip":!0}}),r("el-table-column",{attrs:{label:"创建密钥版本日期",prop:"creationDate"}})],1),r("el-pagination",{attrs:{"current-page":e.queryInfo.pagenum,"page-sizes":[5,10,15,20],"page-size":e.queryInfo.pagesize,layout:"total, sizes, prev, pager, next, jumper",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)],1)},n=[],o=(r("96cf"),r("1da1")),s={data:function(){return{queryInfo:{pagenum:1,pagesize:10},keyList:[],total:0,keyId:this.$route.query.keyId}},beforeRouteEnter:function(e,t,r){var a=window.sessionStorage.getItem("accountTypeLogin");if("9"!==a)return r("/404");r()},created:function(){this.getKeyId()},methods:{getKeyId:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var r,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$http.post("v1/kms/ListKeyVersions",{keyId:e.keyId,pageNumber:e.queryInfo.pagenum,pageSize:e.queryInfo.pagesize});case 2:if(r=t.sent,a=r.data,0!==a.code){t.next=9;break}e.keyList=a.data.list,e.total=a.data.total,t.next=10;break;case 9:return t.abrupt("return",e.$message.error("获取密钥版本信息失败！"));case 10:case"end":return t.stop()}}),t)})))()},handleSizeChange:function(e){this.queryInfo.pagesize=e,this.getKeyId()},handleCurrentChange:function(e){this.queryInfo.pagenum=e,this.getKeyId()},addVersion:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var r,a,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$confirm("确定要创建一个新的密钥版本？","提示",{confirmButtonText:"确定",cancelButtontext:"取消",type:"warning"}).catch((function(e){return e}));case 2:if(r=t.sent,"confirm"===r){t.next=5;break}return t.abrupt("return");case 5:return t.next=7,e.$http.post("v1/kms/CreateKeyVersion",{keyId:e.keyId});case 7:if(a=t.sent,n=a.data,0!==n.code){t.next=14;break}e.$message.success("创建新的密钥版本成功！"),e.getKeyId(),t.next=15;break;case 14:return t.abrupt("return",e.$message.error(""!==n.msg?n.msg:"创建新的密钥版本失败！"));case 15:case"end":return t.stop()}}),t)})))()}}},i=s,u=r("2877"),c=Object(u["a"])(i,a,n,!1,null,null,null);t["default"]=c.exports}}]);
//# sourceMappingURL=chunk-2d21da71.fb4f1ac3.js.map