(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-73c9ca24"],{"183e":function(e,t,r){"use strict";var a=r("644e"),n=r.n(a);n.a},"1dde":function(e,t,r){var a=r("d039"),n=r("b622"),o=r("2d00"),i=n("species");e.exports=function(e){return o>=51||!a((function(){var t=[],r=t.constructor={};return r[i]=function(){return{foo:1}},1!==t[e](Boolean).foo}))}},"644e":function(e,t,r){},"99af":function(e,t,r){"use strict";var a=r("23e7"),n=r("d039"),o=r("e8b5"),i=r("861d"),s=r("7b0b"),p=r("50c4"),l=r("8418"),c=r("65f0"),u=r("1dde"),d=r("b622"),m=r("2d00"),f=d("isConcatSpreadable"),g=9007199254740991,b="Maximum allowed index exceeded",h=m>=51||!n((function(){var e=[];return e[f]=!1,e.concat()[0]!==e})),w=u("concat"),y=function(e){if(!i(e))return!1;var t=e[f];return void 0!==t?!!t:o(e)},v=!h||!w;a({target:"Array",proto:!0,forced:v},{concat:function(e){var t,r,a,n,o,i=s(this),u=c(i,0),d=0;for(t=-1,a=arguments.length;t<a;t++)if(o=-1===t?i:arguments[t],y(o)){if(n=p(o.length),d+n>g)throw TypeError(b);for(r=0;r<n;r++,d++)r in o&&l(u,d,o[r])}else{if(d>=g)throw TypeError(b);l(u,d++,o)}return u.length=d,u}})},a908:function(e,t,r){"use strict";r.r(t);var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"appUser"},[r("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[r("el-breadcrumb-item",{attrs:{to:{path:"/home"}}},[e._v("首页")]),r("el-breadcrumb-item",[e._v("应用管理")])],1),r("el-card",[r("el-row",[r("el-button",{attrs:{type:"primary"},on:{click:function(t){e.addDialogVisible=!0}}},[e._v("添加")])],1),r("el-table",{attrs:{data:e.userlist,stripe:"","row-key":e.getRowKeys,"expand-row-keys":e.expands},on:{"expand-change":e.expandChange}},[r("el-table-column",{attrs:{type:"expand"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-form",{staticClass:"demo-table-expand",attrs:{"label-position":"left",inline:""}},[r("el-form-item",{attrs:{label:"appKey:"}},[r("span",[e._v(e._s(""===t.row.appKey||null==t.row.appKey?"-":t.row.appKey))])])],1),r("el-form",{staticClass:"demo-table-expand",attrs:{"label-position":"left",inline:""}},[r("el-form-item",{attrs:{label:"appSecret:"}},[r("span",[e._v(e._s(""===t.row.appSecret||null==t.row.appSecret?"-":t.row.appSecret))])])],1)]}}])}),r("el-table-column",{attrs:{type:"index",label:"序号"}}),r("el-table-column",{attrs:{label:"应用名称",prop:"appName","show-overflow-tooltip":!0}}),r("el-table-column",{attrs:{label:"应用类型",prop:"appType"},scopedSlots:e._u([{key:"default",fn:function(t){return[1===t.row.appType?r("span",[e._v("专用应用")]):2===t.row.appType?r("span",[e._v("通用应用")]):e._e()]}}])}),r("el-table-column",{attrs:{label:"备注",prop:"comments","show-overflow-tooltip":!0},scopedSlots:e._u([{key:"default",fn:function(t){return[r("span",[e._v(e._s(""===t.row.comments||null==t.row.comments?"-":t.row.comments))])]}}])}),r("el-table-column",{attrs:{label:"创建时间",prop:"createTime","show-overflow-tooltip":!0}}),r("el-table-column",{attrs:{label:"操作",width:"400px"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-button",{attrs:{type:"danger",size:"mini"},on:{click:function(r){return e.deleteByName(t.row.appId)}}},[e._v("删除")]),r("el-button",{attrs:{type:"success",size:"mini"},on:{click:function(r){return e.goDeviceDetail(t.row.appId,t.row.appType)}}},[e._v("终端列表 ")]),r("el-button",{attrs:{type:"warning",size:"mini"},on:{click:function(r){return e.goAppList(t.row.appId)}}},[e._v("绑定应用管理员")]),1===t.row.appType?r("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(r){return e.goDeviceConfig(t.row.appId)}}},[e._v("配置 ")]):e._e()]}}])})],1),r("el-pagination",{attrs:{"current-page":e.queryInfo.pagenum,"page-sizes":[5,10,15,20],"page-size":e.queryInfo.pagesize,layout:"total, sizes, prev, pager, next, jumper",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1),r("el-dialog",{attrs:{title:"添加应用",visible:e.addDialogVisible,width:"520px"},on:{"update:visible":function(t){e.addDialogVisible=t},close:e.addDialogClosed}},[r("el-form",{ref:"addFormRef",staticStyle:{width:"80%",margin:"20px auto"},attrs:{model:e.addForm,rules:e.addFormRules,"label-width":"80px"}},[r("el-form-item",{attrs:{label:"应用名称",prop:"loginName"}},[r("el-input",{model:{value:e.addForm.loginName,callback:function(t){e.$set(e.addForm,"loginName","string"===typeof t?t.trim():t)},expression:"addForm.loginName"}})],1),r("el-form-item",{attrs:{label:"应用类型",prop:"appType"}},[r("el-radio-group",{on:{change:e.radioChange},model:{value:e.addForm.appType,callback:function(t){e.$set(e.addForm,"appType","string"===typeof t?t.trim():t)},expression:"addForm.appType"}},[r("el-radio",{attrs:{label:1}},[e._v("专用应用")]),r("el-radio",{attrs:{label:2}},[e._v("通用应用")])],1)],1),r("el-form-item",{attrs:{label:"备注",prop:"comments"}},[r("el-input",{attrs:{type:"textarea",maxlength:"200","show-word-limit":"",rows:5},model:{value:e.addForm.comments,callback:function(t){e.$set(e.addForm,"comments","string"===typeof t?t.trim():t)},expression:"addForm.comments"}})],1)],1),r("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:function(t){e.addDialogVisible=!1}}},[e._v("取 消")]),r("el-button",{directives:[{name:"preventReClick",rawName:"v-preventReClick",value:1e3,expression:"1000"}],attrs:{type:"primary"},on:{click:e.submitAdd}},[e._v("确 定")])],1)],1)],1)},n=[],o=(r("99af"),r("96cf"),r("1da1")),i={data:function(){return{isShow:"",userlist:[],queryInfo:{pagenum:1,pagesize:10},total:0,expands:[],getRowKeys:function(e){return e.appId},addDialogVisible:!1,addForm:{loginName:"",appType:null,comments:""},addFormRules:{loginName:[{required:!0,message:"请输入应用名",trigger:"blur"},{min:2,max:16,message:"长度为2-16位",trigger:"blur"}],appType:[{required:!0,message:"请选择应用类型",trigger:"change"}],comments:[{min:0,max:200,message:"长度在200个字符以内",trigger:"blur"}]}}},beforeRouteEnter:function(e,t,r){var a=window.sessionStorage.getItem("accountTypeLogin");if("9"!==a)return r("/404");r()},created:function(){this.getUserList()},methods:{getUserList:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var r,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$http.get("app/getApps/".concat(e.queryInfo.pagenum,"/").concat(e.queryInfo.pagesize,"?ts=").concat((new Date).getTime()));case 2:if(r=t.sent,a=r.data,0===a.code){t.next=6;break}return t.abrupt("return",e.$message.error("获取用户信息失败！"));case 6:e.userlist=a.data.list,e.total=a.data.total;case 8:case"end":return t.stop()}}),t)})))()},handleSizeChange:function(e){this.queryInfo.pagesize=e,this.getUserList()},handleCurrentChange:function(e){this.queryInfo.pagenum=e,this.getUserList()},expandChange:function(e,t){t.length?(this.expands=[],e&&this.expands.push(e.appId)):this.expands=[]},addDialogClosed:function(){this.$refs.addFormRef.resetFields()},submitAdd:function(){var e=this;this.$refs.addFormRef.validate(function(){var t=Object(o["a"])(regeneratorRuntime.mark((function t(r){var a,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(r){t.next=2;break}return t.abrupt("return");case 2:return t.next=4,e.$http.post("app/addApp",{appName:e.addForm.loginName,appType:e.addForm.appType,comments:e.addForm.comments});case 4:if(a=t.sent,n=a.data,0===n.code){t.next=8;break}return t.abrupt("return",e.$message.error("添加失败!"));case 8:e.$message.success("添加成功!"),e.addDialogVisible=!1,e.getUserList();case 11:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())},deleteByName:function(e){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function r(){var a,n,o;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,t.$confirm("此操作将删除该应用，是否继续？","提示",{confirmButtonText:"确定",cancelButtontext:"取消",type:"warning"}).catch((function(e){return e}));case 2:if(a=r.sent,"confirm"===a){r.next=5;break}return r.abrupt("return");case 5:return r.next=7,t.$http.get("app/deleteApp",{params:{appId:e}});case 7:if(n=r.sent,o=n.data,0===o.code){r.next=11;break}return r.abrupt("return",t.$message.error("删除失败！"));case 11:t.$message.success("删除成功！"),t.getUserList();case 13:case"end":return r.stop()}}),r)})))()},radioChange:function(e){this.addForm.comments=1===e?"密钥云终端形式":"标准协议形式"},goDeviceDetail:function(e,t){this.$router.push({path:"/pwsp",query:{id:e,type:t}})},goDeviceConfig:function(e){this.$router.push({path:"/qems",query:{id:e}})},goAppList:function(e){this.$router.push({path:"/appList",query:{id:e}})}}},s=i,p=(r("183e"),r("2877")),l=Object(p["a"])(s,a,n,!1,null,"4c91cdd3",null);t["default"]=l.exports}}]);
//# sourceMappingURL=chunk-73c9ca24.e718c98e.js.map