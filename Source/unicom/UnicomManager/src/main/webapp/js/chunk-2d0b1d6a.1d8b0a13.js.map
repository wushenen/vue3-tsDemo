{"version":3,"sources":["webpack:///./src/views/Sversion.vue?33fb","webpack:///src/views/Sversion.vue","webpack:///./src/views/Sversion.vue?2401","webpack:///./src/views/Sversion.vue"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticStyle","attrs","path","_v","on","$event","addDialogVisible","keyList","_s","secretName","scopedSlots","_u","key","fn","scope","row","plannedDeleteTime","open","versionId","deleteByName","deleCancel","_e","queryInfo","pagenum","pagesize","total","handleSizeChange","handleCurrentChange","pingDialogVisible","pingDialogClosed","gridData","secretData","secretDataType","addDialogClosed","ref","addForm","addFormRules","model","value","callback","$$v","$set","trim","expression","staticClass","slot","submitAdd","deleDialogVisible","deleDialogClosed","deleForm","deleFormRules","radioChange","submitDele","staticRenderFns","component"],"mappings":"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","file":"js/chunk-2d0b1d6a.1d8b0a13.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticStyle:{\"min-width\":\"1200px\"}},[_c('el-breadcrumb',{attrs:{\"separator-class\":\"el-icon-arrow-right\"}},[_c('el-breadcrumb-item',{attrs:{\"to\":{ path: '/home' }}},[_vm._v(\"首页\")]),_c('el-breadcrumb-item',{attrs:{\"to\":{path:'/secrets'}}},[_vm._v(\"凭据管理\")]),_c('el-breadcrumb-item',[_vm._v(\"凭据版本\")])],1),_c('el-card',[_c('el-row',[_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":function($event){_vm.addDialogVisible = true}}},[_vm._v(\"添加\")])],1),_c('el-table',{attrs:{\"data\":_vm.keyList,\"border\":\"\",\"stripe\":\"\"}},[_c('el-table-column',{attrs:{\"type\":\"index\",\"label\":\"序号\"}}),_c('el-table-column',{attrs:{\"label\":\"凭据名称\",\"show-overflow-tooltip\":true}},[_vm._v(_vm._s(_vm.secretName))]),_c('el-table-column',{attrs:{\"label\":\"版本标识符\",\"prop\":\"versionId\"}}),_c('el-table-column',{attrs:{\"label\":\"创建时间\",\"prop\":\"createTime\",\"show-overflow-tooltip\":true}}),_c('el-table-column',{attrs:{\"label\":\"计划删除时间\",\"prop\":\"plannedDeleteTime\",\"show-overflow-tooltip\":true},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('span',[_vm._v(_vm._s(scope.row.plannedDeleteTime === null || scope.row.plannedDeleteTime === \"\" ? '-' : scope.row.plannedDeleteTime))])]}}])}),_c('el-table-column',{attrs:{\"label\":\"操作\",\"width\":\"300\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('el-button',{attrs:{\"size\":\"mini\",\"type\":\"primary\",\"plain\":\"\"},on:{\"click\":function($event){return _vm.open(scope.row.versionId)}}},[_vm._v(\"获取凭据值 \")]),_c('el-button',{attrs:{\"size\":\"mini\",\"type\":\"danger\",\"plain\":\"\"},on:{\"click\":function($event){return _vm.deleteByName(scope.row.versionId)}}},[_vm._v(\"删除 \")]),(scope.row.plannedDeleteTime != null)?_c('el-button',{attrs:{\"size\":\"mini\",\"type\":\"warning\",\"plain\":\"\"},on:{\"click\":function($event){return _vm.deleCancel(scope.row.versionId)}}},[_vm._v(\"恢复凭据 \")]):_vm._e()]}}])})],1),_c('el-pagination',{attrs:{\"current-page\":_vm.queryInfo.pagenum,\"page-sizes\":[5,10,15,20],\"page-size\":_vm.queryInfo.pagesize,\"layout\":\"total, sizes, prev, pager, next, jumper\",\"total\":_vm.total},on:{\"size-change\":_vm.handleSizeChange,\"current-change\":_vm.handleCurrentChange}}),_c('el-dialog',{attrs:{\"title\":\"获取指定版本的凭据值\",\"visible\":_vm.pingDialogVisible,\"width\":\"500px\"},on:{\"update:visible\":function($event){_vm.pingDialogVisible=$event},\"close\":_vm.pingDialogClosed}},[_c('p',[_c('span',[_vm._v(\"凭据值：\")]),_c('span',[_vm._v(_vm._s(_vm.gridData.secretData))])]),_c('p',[_c('span',[_vm._v(\"凭据类型：\")]),_c('span',[_vm._v(_vm._s(_vm.gridData.secretDataType))])])]),_c('el-dialog',{attrs:{\"title\":\"为凭据存入一个新版本的凭据值\",\"visible\":_vm.addDialogVisible,\"width\":\"500px\"},on:{\"update:visible\":function($event){_vm.addDialogVisible=$event},\"close\":_vm.addDialogClosed}},[_c('el-form',{ref:\"addFormRef\",staticStyle:{\"width\":\"80%\",\"margin\":\"20px auto\"},attrs:{\"model\":_vm.addForm,\"rules\":_vm.addFormRules,\"label-width\":\"100px\"}},[_c('el-form-item',{attrs:{\"label\":\"凭据名称\",\"prop\":\"secretName\"}},[_c('el-input',{attrs:{\"disabled\":\"\"},model:{value:(_vm.addForm.secretName),callback:function ($$v) {_vm.$set(_vm.addForm, \"secretName\", (typeof $$v === 'string'? $$v.trim(): $$v))},expression:\"addForm.secretName\"}})],1),_c('el-form-item',{attrs:{\"label\":\"凭据值\",\"prop\":\"secretData\"}},[_c('el-input',{model:{value:(_vm.addForm.secretData),callback:function ($$v) {_vm.$set(_vm.addForm, \"secretData\", (typeof $$v === 'string'? $$v.trim(): $$v))},expression:\"addForm.secretData\"}})],1),_c('el-form-item',{attrs:{\"label\":\"版本号\",\"prop\":\"versionId\"}},[_c('el-input',{model:{value:(_vm.addForm.versionId),callback:function ($$v) {_vm.$set(_vm.addForm, \"versionId\", (typeof $$v === 'string'? $$v.trim(): $$v))},expression:\"addForm.versionId\"}})],1),_c('el-form-item',{attrs:{\"label\":\"凭据值类型\",\"prop\":\"secretDataType\"}},[_c('el-radio-group',{model:{value:(_vm.addForm.secretDataType),callback:function ($$v) {_vm.$set(_vm.addForm, \"secretDataType\", $$v)},expression:\"addForm.secretDataType\"}},[_c('el-radio',{attrs:{\"label\":\"text\"}},[_vm._v(\"text\")]),_c('el-radio',{attrs:{\"label\":\"binary\"}},[_vm._v(\"binary\")])],1)],1)],1),_c('div',{staticClass:\"dialog-footer\",attrs:{\"slot\":\"footer\"},slot:\"footer\"},[_c('el-button',{on:{\"click\":function($event){_vm.addDialogVisible = false}}},[_vm._v(\"取 消\")]),_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":_vm.submitAdd}},[_vm._v(\"确 定\")])],1)],1),_c('el-dialog',{attrs:{\"title\":\"删除指定版本的凭据对象\",\"visible\":_vm.deleDialogVisible,\"width\":\"500px\"},on:{\"update:visible\":function($event){_vm.deleDialogVisible=$event},\"close\":_vm.deleDialogClosed}},[_c('el-form',{ref:\"deleFormRef\",staticStyle:{\"width\":\"80%\",\"margin\":\"20px auto\"},attrs:{\"model\":_vm.deleForm,\"rules\":_vm.deleFormRules,\"label-width\":\"100px\"}},[_c('el-form-item',{attrs:{\"label\":\"是否强制删除\",\"prop\":\"type\"}},[_c('el-radio-group',{on:{\"change\":_vm.radioChange},model:{value:(_vm.deleForm.type),callback:function ($$v) {_vm.$set(_vm.deleForm, \"type\", $$v)},expression:\"deleForm.type\"}},[_c('el-radio',{attrs:{\"label\":\"false\"}},[_vm._v(\"否\")]),_c('el-radio',{attrs:{\"label\":\"true\"}},[_vm._v(\"是\")])],1)],1),(_vm.isdeleShow)?_c('el-form-item',{attrs:{\"label\":\"预删除天数\",\"prop\":\"days\"}},[_c('el-input',{model:{value:(_vm.deleForm.days),callback:function ($$v) {_vm.$set(_vm.deleForm, \"days\", (typeof $$v === 'string'? $$v.trim(): $$v))},expression:\"deleForm.days\"}})],1):_vm._e()],1),_c('div',{staticClass:\"dialog-footer\",attrs:{\"slot\":\"footer\"},slot:\"footer\"},[_c('el-button',{on:{\"click\":function($event){_vm.deleDialogVisible = false}}},[_vm._v(\"取 消\")]),_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":_vm.submitDele}},[_vm._v(\"确 定\")])],1)],1)],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div style=\"min-width: 1200px\">\r\n    <el-breadcrumb separator-class=\"el-icon-arrow-right\">\r\n      <el-breadcrumb-item :to=\"{ path: '/home' }\">首页</el-breadcrumb-item>\r\n      <el-breadcrumb-item :to=\"{path:'/secrets'}\">凭据管理</el-breadcrumb-item>\r\n      <el-breadcrumb-item>凭据版本</el-breadcrumb-item>\r\n    </el-breadcrumb>\r\n    <el-card>\r\n      <el-row>\r\n        <el-button type=\"primary\" @click=\"addDialogVisible = true\">添加</el-button>\r\n      </el-row>\r\n      <el-table :data=\"keyList\" border stripe>\r\n        <el-table-column type=\"index\" label=\"序号\"></el-table-column>\r\n        <el-table-column label=\"凭据名称\" :show-overflow-tooltip=\"true\">{{secretName}}</el-table-column>\r\n        <el-table-column label=\"版本标识符\" prop=\"versionId\"></el-table-column>\r\n        <el-table-column label=\"创建时间\" prop=\"createTime\" :show-overflow-tooltip=\"true\"></el-table-column>\r\n        <el-table-column label=\"计划删除时间\" prop=\"plannedDeleteTime\" :show-overflow-tooltip=\"true\">\r\n          <template slot-scope=\"scope\">\r\n            <span>{{scope.row.plannedDeleteTime === null || scope.row.plannedDeleteTime === \"\" ? '-' : scope.row.plannedDeleteTime}}</span>\r\n          </template>\r\n        </el-table-column>\r\n        <el-table-column label=\"操作\" width=\"300\">\r\n          <template slot-scope=\"scope\">\r\n            <el-button size=\"mini\" type=\"primary\" plain @click=\"open(scope.row.versionId)\">获取凭据值\r\n            </el-button>\r\n            <el-button size=\"mini\" type=\"danger\" plain @click=\"deleteByName(scope.row.versionId)\">删除\r\n            </el-button>\r\n            <el-button size=\"mini\" v-if=\"scope.row.plannedDeleteTime != null\" type=\"warning\" plain\r\n                       @click=\"deleCancel(scope.row.versionId)\">恢复凭据\r\n            </el-button>\r\n          </template>\r\n        </el-table-column>\r\n      </el-table>\r\n      <el-pagination\r\n        @size-change=\"handleSizeChange\"\r\n        @current-change=\"handleCurrentChange\"\r\n        :current-page=\"queryInfo.pagenum\"\r\n        :page-sizes=\"[5,10,15,20]\"\r\n        :page-size=\"queryInfo.pagesize\"\r\n        layout=\"total, sizes, prev, pager, next, jumper\"\r\n        :total=\"total\">\r\n      </el-pagination>\r\n      <el-dialog title=\"获取指定版本的凭据值\" :visible.sync=\"pingDialogVisible\" width=\"500px\" @close=\"pingDialogClosed\">\r\n        <p><span>凭据值：</span><span>{{gridData.secretData}}</span></p>\r\n        <p><span>凭据类型：</span><span>{{gridData.secretDataType}}</span></p>\r\n      </el-dialog>\r\n      <el-dialog title=\"为凭据存入一个新版本的凭据值\" :visible.sync=\"addDialogVisible\" width=\"500px\" @close=\"addDialogClosed\">\r\n        <el-form style=\"width: 80%;margin: 20px auto;\" :model=\"addForm\" :rules=\"addFormRules\" ref=\"addFormRef\"\r\n                 label-width=\"100px\">\r\n          <el-form-item label=\"凭据名称\" prop=\"secretName\">\r\n            <el-input v-model.trim=\"addForm.secretName\" disabled></el-input>\r\n          </el-form-item>\r\n          <el-form-item label=\"凭据值\" prop=\"secretData\">\r\n            <el-input v-model.trim=\"addForm.secretData\"></el-input>\r\n          </el-form-item>\r\n          <el-form-item label=\"版本号\" prop=\"versionId\">\r\n            <el-input v-model.trim=\"addForm.versionId\"></el-input>\r\n          </el-form-item>\r\n          <el-form-item label=\"凭据值类型\" prop=\"secretDataType\">\r\n            <el-radio-group v-model=\"addForm.secretDataType\">\r\n              <el-radio label=\"text\">text</el-radio>\r\n              <el-radio label=\"binary\">binary</el-radio>\r\n            </el-radio-group>\r\n          </el-form-item>\r\n        </el-form>\r\n        <div slot=\"footer\" class=\"dialog-footer\">\r\n          <el-button @click=\"addDialogVisible = false\">取 消</el-button>\r\n          <el-button type=\"primary\" @click=\"submitAdd\">确 定</el-button>\r\n        </div>\r\n      </el-dialog>\r\n      <el-dialog title=\"删除指定版本的凭据对象\" :visible.sync=\"deleDialogVisible\" width=\"500px\" @close=\"deleDialogClosed\">\r\n        <el-form style=\"width: 80%;margin: 20px auto;\" :model=\"deleForm\" :rules=\"deleFormRules\" ref=\"deleFormRef\"\r\n                 label-width=\"100px\">\r\n          <el-form-item label=\"是否强制删除\" prop=\"type\">\r\n            <el-radio-group v-model=\"deleForm.type\" @change=\"radioChange\">\r\n              <el-radio label=\"false\">否</el-radio>\r\n              <el-radio label=\"true\">是</el-radio>\r\n            </el-radio-group>\r\n          </el-form-item>\r\n          <el-form-item label=\"预删除天数\" prop=\"days\" v-if=\"isdeleShow\">\r\n            <el-input v-model.trim=\"deleForm.days\"></el-input>\r\n          </el-form-item>\r\n        </el-form>\r\n        <div slot=\"footer\" class=\"dialog-footer\">\r\n          <el-button @click=\"deleDialogVisible = false\">取 消</el-button>\r\n          <el-button type=\"primary\" @click=\"submitDele\">确 定</el-button>\r\n        </div>\r\n      </el-dialog>\r\n    </el-card>\r\n  </div>\r\n</template>\r\n<script>\r\n  export default {\r\n    data() {\r\n      const checkNum = (rule, value, cb) => {\r\n        const regIP = /^[0-9]*[1-9][0-9]*$/;\r\n        if (regIP.test(value)) {\r\n          if (value > 0 && value < 31) {\r\n            return cb()\r\n          } else {\r\n            cb(new Error('请输入1-30的数字'))\r\n          }\r\n        }\r\n        cb(new Error('请输入1-30的数字'))\r\n      };\r\n      return {\r\n        queryInfo: {\r\n          pagenum: 1,\r\n          pagesize: 10\r\n        },\r\n        keyList: [],\r\n        total: 0,\r\n        secretName: this.$route.query.secretName,\r\n        //        凭据\r\n        gridData: {},\r\n        pingDialogVisible: false,\r\n        pingForm: {\r\n          versionId: '',\r\n        },\r\n        //        添加\r\n        addDialogVisible: false,\r\n        addForm: {\r\n          secretData: '',\r\n          secretName: this.$route.query.secretName,\r\n          versionId: '',\r\n          secretDataType: 'text',\r\n        },\r\n        addFormRules: {\r\n          secretData: [{\r\n            required: true,\r\n            message: '必填项不能为空',\r\n            trigger: 'blur'\r\n          }],\r\n          secretName: [{\r\n            required: true,\r\n            message: '必填项不能为空',\r\n            trigger: 'blur'\r\n          }],\r\n          versionId: [{\r\n            required: true,\r\n            message: '必填项不能为空',\r\n            trigger: 'blur'\r\n          }],\r\n        },\r\n        //        删除\r\n        isdeleShow: true,\r\n        deleDialogVisible: false,\r\n        versionIdDele: '',\r\n        deleForm: {\r\n          type: 'false',\r\n          days: '30',\r\n        },\r\n        deleFormRules: {\r\n          days: [{required: true, validator: checkNum, trigger: 'blur'}],\r\n        },\r\n      }\r\n    },\r\n    beforeRouteEnter: (to, form, next) => {\r\n      const loginType = window.sessionStorage.getItem('accountTypeLogin');\r\n      if (loginType === '9') {\r\n        next()\r\n      } else {\r\n        return next('/404')\r\n      }\r\n    },\r\n    created() {\r\n      this.getKeyId();\r\n    },\r\n    methods: {\r\n      async getKeyId() {\r\n        const {data: res} = await this.$http.post('v1/kms/ListSecretVersionIds', {\r\n          'secretName': this.secretName, 'pageNumber': this.queryInfo.pagenum, 'pageSize': this.queryInfo.pagesize\r\n        });\r\n        if (res.code === 0) {\r\n          this.keyList = res.data.versionIds;\r\n          this.total = res.data.totalCount;\r\n        } else {\r\n          return this.$message.error('获取密钥版本信息失败！')\r\n        }\r\n      },\r\n      handleSizeChange(newSize) {\r\n        this.queryInfo.pagesize = newSize;\r\n        this.getKeyId()\r\n      },\r\n      handleCurrentChange(newPage) {\r\n        this.queryInfo.pagenum = newPage;\r\n        this.getKeyId()\r\n      },\r\n      async open(name) {\r\n        const {data: res} = await this.$http.post('v1/kms/GetSecretValue', {\r\n          'secretName': this.secretName,\r\n          'versionId': name\r\n        });\r\n        if (res.code !== 0) return this.$message.error((res.msg !== '' && res.msg !== null) ? res.msg : '请求失败！');\r\n        this.gridData = res.data;\r\n        this.pingDialogVisible = true;\r\n      },\r\n      pingDialogClosed() {\r\n      },\r\n      addDialogClosed() {\r\n        this.$refs.addFormRef.resetFields();\r\n      },\r\n      submitAdd() {//添加提交\r\n        this.$refs.addFormRef.validate(async valid => {\r\n          if (!valid) return;\r\n          const {data: res} = await this.$http.post('v1/kms/PutSecretValue', this.addForm);\r\n          if (res.code !== 0) return this.$message.error((res.msg !== '' && res.msg !== null) ? res.msg : '添加失败！');\r\n          this.$message.success('添加成功！');\r\n          this.addDialogVisible = false;\r\n          this.getKeyId();\r\n        })\r\n      },\r\n      async deleCancel(id) {\r\n        const confirmResult = await this.$confirm(\r\n          '确定要恢复被删除的凭据？', '提示', {\r\n            confirmButtonText: '确定',\r\n            cancelButtontext: '取消',\r\n            type: 'warning',\r\n          }\r\n        ).catch(err => err);\r\n        if (confirmResult !== 'confirm') {\r\n          return\r\n        }\r\n        const {data: res} = await this.$http.post('v1/kms/RestoreSecret', {\r\n          'secretName': this.secretName,\r\n          'versionId': id,\r\n        });\r\n        if (res.code !== 0) return this.$message.error((res.msg !== '' && res.msg !== null) ? res.msg : '恢复失败！');\r\n        this.$message.success('恢复成功！');\r\n        this.getKeyId()\r\n      },\r\n      deleteByName(versionIdDele) {\r\n        this.deleDialogVisible = true;\r\n        this.versionIdDele = versionIdDele;\r\n        this.isdeleShow = true;\r\n        this.deleForm.days = '30';\r\n      },\r\n      async submitDele() {\r\n        this.$refs.deleFormRef.validate(async valid => {\r\n            if (!valid) return;\r\n            const {data: res} = await this.$http.post('v1/kms/DeleteSecret', {\r\n              'versionId': this.versionIdDele,\r\n              'secretName': this.secretName,\r\n              'forceDeleteWithoutRecovery': this.deleForm.type,\r\n              'recoveryWindowInDays': this.deleForm.days\r\n            });\r\n            if (res.code !== 0) return this.$message.error((res.msg !== '' && res.msg !== null) ? res.msg : '删除失败！');\r\n            this.$message.success('删除成功！');\r\n            this.deleDialogVisible = false;\r\n            this.getKeyId();\r\n          },\r\n        )\r\n      },\r\n      radioChange(value) {\r\n        if (value === 'true') {\r\n          this.deleForm.days = '';\r\n          this.isdeleShow = false;\r\n        } else {\r\n          this.isdeleShow = true;\r\n          this.deleForm.days = '30';\r\n        }\r\n      },\r\n      deleDialogClosed() {\r\n        this.$refs.deleFormRef.resetFields();\r\n      },\r\n    }\r\n  }\r\n</script>\r\n<style>\r\n\r\n</style>\r\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Sversion.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Sversion.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Sversion.vue?vue&type=template&id=6dd30def&\"\nimport script from \"./Sversion.vue?vue&type=script&lang=js&\"\nexport * from \"./Sversion.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}