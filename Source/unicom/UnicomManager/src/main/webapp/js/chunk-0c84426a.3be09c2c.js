(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-0c84426a"],{4182:function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"echartsDemo"},[a("div",{staticClass:"header"},[a("el-button",{staticClass:"header-btn",on:{click:t.goBack}},[t._v("返回")]),a("h1",[t._v("设备统计可视化")]),a("div",{staticClass:"showTime"},[t._v(t._s(t.nowDate))])],1),a("div",{staticClass:"wrap"},[a("div",{staticClass:"mainbox"},[t._m(0),a("div",{staticClass:"columnCenter"},[a("div",{staticClass:"no"},[a("div",{staticClass:"no-hd"},[a("ul",[a("li",[t._v(t._s(t.deviceNum))]),a("li",[t._v(t._s(t.onlineNum))])])]),t._m(1)]),t._m(2)]),t._m(3)]),a("div",{staticClass:"footer"},[a("div",{staticClass:"bottomWrap"},[t._m(4),a("el-table",{attrs:{data:t.userList,stripe:""}},[a("el-table-column",{attrs:{type:"index",label:"序号"}}),a("el-table-column",{attrs:{label:"操作者",prop:"operator","show-overflow-tooltip":!0},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(null==e.row.operator||""==e.row.operator?"-":e.row.operator))])]}}])}),a("el-table-column",{attrs:{label:"IP地址",prop:"operateIp","show-overflow-tooltip":!0}}),a("el-table-column",{attrs:{label:"操作模块",prop:"operateModel"}}),a("el-table-column",{attrs:{label:"耗时(毫秒)",prop:"execTime"}}),a("el-table-column",{attrs:{label:"操作结果",prop:"operateStatus"},scopedSlots:t._u([{key:"default",fn:function(e){return[0===e.row.operateStatus?a("span",[t._v("成功")]):1===e.row.operateStatus?a("span",[t._v("失败")]):t._e()]}}])}),a("el-table-column",{attrs:{label:"详情",prop:"detail"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(null==e.row.detail||""==e.row.detail?"-":e.row.detail))])]}}])}),a("el-table-column",{attrs:{label:"更新时间",prop:"updateTime","show-overflow-tooltip":!0},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(null==e.row.updateTime||""==e.row.updateTime?"-":e.row.updateTime))])]}}])})],1),a("div",{staticClass:"bottom-footer"})],1)])])])},i=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"columnLeft"},[a("div",{staticClass:"panel barLeft1"},[a("h2",[t._v("密钥使用量")]),a("div",{staticClass:"chart"}),a("div",{staticClass:"panel-footer"})])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"no-bd"},[a("ul",[a("li",[t._v("接入设备数量")]),a("li",[t._v("在线数量")])])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"no-gauge"},[a("div",{staticClass:"chart"}),a("p",{staticClass:"title"},[t._v("密钥使用总量")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"columnRight"},[a("div",{staticClass:"panel barRight1"},[a("h2",[t._v("加密、解密数量")]),a("div",{staticClass:"chart"}),a("div",{staticClass:"panel-footer"})])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("p",[a("span",{staticClass:"hrSpan"}),a("span",{staticStyle:{padding:"0 10px"}},[t._v("最近业务信息")]),a("span",{staticClass:"hrSpan"})])}],o=(a("99af"),a("a15b"),a("d81d"),a("fb6a"),a("a9e3"),a("96cf"),a("1da1")),r=a("313e"),s={data:function(){return{deviceNum:"",onlineNum:"",keyUseNum:"",totalInfo:{},nowDate:null,timer:null,total:0,userList:[],queryInfo:{pagenum:1,pagesize:4}}},beforeRouteEnter:function(t,e,a){var n=window.sessionStorage.getItem("accountTypeLogin");if("9"!==n)return a("/404");a()},created:function(){this.currentTime(),this.getTotalInfo(),this.jishi()},methods:{goBack:function(){this.$router.go(-1)},getTotalInfo:function(){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function e(){var a,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.$http.get("status/getDeviceStatusInfo?ts=".concat((new Date).getTime()));case 2:if(a=e.sent,n=a.data,0===n.code){e.next=6;break}return e.abrupt("return",t.$message.error("获取数据信息失败！"));case 6:t.totalInfo=n.data,t.deviceNum=n.data.deviceStatusInfo.deviceNum,t.onlineNum=n.data.deviceStatusInfo.onlineNum,t.keyUseNum=n.data.deviceStatusInfo.keyUseNum,t.userList=n.data.logs,t.barLeft1(t.totalInfo),t.barRight1(t.totalInfo),t.gaugeLine(t.keyUseNum);case 14:case"end":return e.stop()}}),e)})))()},jishi:function(){var t=this;this.timer=setInterval((function(){t.getTotalInfo()}),5e3)},currentTime:function(){setInterval(this.formatDate,1e3)},formatDate:function(){var t=new Date,e=t.getFullYear(),a=t.getMonth()+1,n=t.getDate(),i=(t.getDay(),t.getHours());i=i<10?"0"+i:i;var o=t.getMinutes();o=o<10?"0"+o:o;var r=t.getSeconds();r=r<10?"0"+r:r,this.nowDate="".concat(e,"年").concat(a,"月").concat(n,"日 ").concat(i,":").concat(o,":").concat(r)},barLeft1:function(t){var e=r["a"](document.querySelector(".barLeft1 .chart"));null==e&&(e=r["b"](document.querySelector(".barLeft1 .chart")));var a=t.deviceStatusInfo.everyDayKeyNum,n=a.map((function(t){return t.timeInfo})),i=a.map((function(t){return t.keyNum}));e.setOption({color:["#2f89cf"],tooltip:{trigger:"axis",axisPointer:{type:"shadow"}},grid:{left:"0%",top:"10px",right:"0%",bottom:"4%",containLabel:!0},xAxis:{type:"category",data:n,axisTick:{alignWithLabel:!0},axisLabel:{color:"rgba(255,255,255,.6)",fontSize:"12"},axisLine:{show:!1}},yAxis:{type:"value",minInterval:1,axisLabel:{color:"rgba(255,255,255,.6) ",fontSize:12},axisLine:{lineStyle:{color:"rgba(255,255,255,.1)",width:2}},splitLine:{lineStyle:{color:"rgba(255,255,255,.1)"}}},series:[{name:"合计",type:"bar",barWidth:"20%",data:i,itemStyle:{borderRadius:5}}]}),window.addEventListener("resize",(function(){e.resize()}))},barRight1:function(t){var e=r["a"](document.querySelector(".barRight1 .chart"));null==e&&(e=r["b"](document.querySelector(".barRight1 .chart"))),e.setOption({color:["#2f89cf"],tooltip:{trigger:"axis",axisPointer:{type:"shadow"}},grid:{left:"0%",top:"10px",right:"0%",bottom:"4%",containLabel:!0},xAxis:{type:"category",data:["加密数量","解密数量","加解密数据总量"],axisTick:{alignWithLabel:!0},axisLabel:{color:"rgba(255,255,255,.6)",fontSize:"12"},axisLine:{show:!1}},yAxis:{type:"value",axisLabel:{color:"rgba(255,255,255,.6) ",fontSize:12,formatter:function(t,e){return t>=1e4&&t<1e7?t=t/1e4+"万":t>=1e7&&(t=t/1e7+"千万"),t}},axisLine:{lineStyle:{color:"rgba(255,255,255,.1)",width:2}},splitLine:{lineStyle:{color:"rgba(255,255,255,.1)"}}},series:[{name:"合计",type:"bar",barWidth:"15%",data:[t.deviceStatusInfo.encDataNum,t.deviceStatusInfo.decDataNum,t.deviceStatusInfo.encDataNum+t.deviceStatusInfo.decDataNum],itemStyle:{borderRadius:5}}]}),window.addEventListener("resize",(function(){e.resize()}))},gaugeLine:function(t){var e=t+"",a=e.length,n=e.slice(0,1),i=Number(n)+1+Array(a).join(0);i<100?i=100:i<1e3&&i>=100?i=1e3:i<1e4&&i>=1e3?i=1e4:i<1e5&&i>=1e4&&(i=1e5);var o=r["a"](document.querySelector(".no-gauge .chart"));null==o&&(o=r["b"](document.querySelector(".no-gauge .chart"))),o.setOption({series:[{type:"gauge",center:["50%","65%"],min:0,max:i,startAngle:200,endAngle:-20,itemStyle:{color:"#58D9F9"},progress:{show:!0,width:15},axisLine:{lineStyle:{width:15}},axisTick:{distance:-30,splitNumber:5,lineStyle:{width:2,color:"#999"}},splitLine:{distance:-46,length:14,lineStyle:{width:3,color:"#999"}},axisLabel:{distance:-25,color:"white",formatter:function(t,e){return t>=1e4&&t<1e7?t=t/1e4+"万":t>=1e7&&(t=t/1e7+"千万"),t}},detail:{valueAnimation:!0,fontSize:25,fontWeight:"bolder",formatter:function(t,e){return t>=1e4&&t<1e7?t=t/1e4+"万":t>=1e7&&(t=t/1e7+"千万"),t},color:"#ffeb7b",offsetCenter:[0,"80%"],fontFamily:"electronicFont"},data:[{value:t}]}]}),window.addEventListener("resize",(function(){o.resize()}))}},beforeDestroy:function(){clearInterval(this.timer),this.formatDate&&clearInterval(this.formatDate)}},l=s,c=(a("e7ed"),a("2877")),u=Object(c["a"])(l,n,i,!1,null,null,null);e["default"]=u.exports},"52f2":function(t,e,a){},e7ed:function(t,e,a){"use strict";var n=a("52f2"),i=a.n(n);i.a}}]);
//# sourceMappingURL=chunk-0c84426a.3be09c2c.js.map