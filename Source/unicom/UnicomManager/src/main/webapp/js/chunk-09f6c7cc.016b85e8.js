(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-09f6c7cc"],{"086f":function(e,t,r){},1738:function(e,t,r){},"24d6":function(e,t,r){"use strict";var o=r("086f"),i=r.n(o);i.a},"2dcc":function(e,t,r){"use strict";var o=r("f466"),i=r.n(o);i.a},"3d2f":function(e,t,r){"use strict";r.r(t);var o=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticStyle:{"min-width":"700px"}},[r("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[r("el-breadcrumb-item",{attrs:{to:{path:"/home"}}},[e._v("首页")]),r("el-breadcrumb-item",[e._v("用户主密钥管理")]),r("el-breadcrumb-item",[e._v("密钥材料")])],1),r("el-card",[r("el-tabs",{on:{"tab-click":e.handleClick},model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[r("el-tab-pane",{attrs:{label:"获取密钥参数",name:"first"}},[r("material-get")],1),r("el-tab-pane",{attrs:{label:"导入密钥材料",name:"second"}},[r("material-import")],1)],1)],1)],1)},i=[],n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("el-form",{ref:"importFormRef",attrs:{model:e.importForm,rules:e.importFormRules,"status-icon":"","label-width":"150px"}},[r("el-form-item",{attrs:{label:"密钥标识",prop:"importKeyId"}},[r("el-input",{model:{value:e.importForm.importKeyId,callback:function(t){e.$set(e.importForm,"importKeyId","string"===typeof t?t.trim():t)},expression:"importForm.importKeyId"}})],1),r("el-form-item",{attrs:{label:"公钥类型/加密算法",prop:"selectedOptions"}},[r("el-cascader",{staticStyle:{width:"100%"},attrs:{options:e.options,clearable:""},model:{value:e.importForm.selectedOptions,callback:function(t){e.$set(e.importForm,"selectedOptions","string"===typeof t?t.trim():t)},expression:"importForm.selectedOptions"}})],1),r("el-form-item",{attrs:{label:"结果",prop:"result"}},[r("el-input",{attrs:{type:"textarea",readonly:!0,rows:20},model:{value:e.importForm.result,callback:function(t){e.$set(e.importForm,"result","string"===typeof t?t.trim():t)},expression:"importForm.result"}})],1),r("el-form-item",[r("el-button",{attrs:{type:"primary"},on:{click:e.submitget}},[e._v("提交")]),r("el-button",{on:{click:function(t){return e.resetForm("importFormRef")}}},[e._v("重置")])],1)],1)],1)},a=[],s=(r("96cf"),r("1da1")),m={data:function(){var e=this,t=function(t,r,o){""===r?o(new Error("请输入密钥标识")):e.getExternal(r,o)};return{options:[{value:"EC_SM2",label:"EC_SM2",children:[{value:"SM2PKE",label:"SM2PKE"}]}],importForm:{importKeyId:"",selectedOptions:"",result:""},importFormRules:{importKeyId:[{required:!0,validator:t,trigger:"blur"}],selectedOptions:[{required:!0,message:"请选项公钥类型/加密算法",trigger:"change"}]}}},methods:{submitget:function(){var e=this;this.$refs.importFormRef.validate(function(){var t=Object(s["a"])(regeneratorRuntime.mark((function t(r){var o,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(r){t.next=2;break}return t.abrupt("return");case 2:return t.next=4,e.$http.post("v1/kms/GetParametersForImport",{keyId:e.importForm.importKeyId,wrappingAlgorithm:e.importForm.selectedOptions[1],wrappingKeySpec:e.importForm.selectedOptions[0]});case 4:if(o=t.sent,i=o.data,0===i.code){t.next=8;break}return t.abrupt("return",e.$message.error(""!==i.msg&&null!==i.msg?i.msg:"获取导入主密钥（CMK）材料的参数失败！"));case 8:e.importForm.result="导入令牌："+i.data.importToken+" \n \n公钥："+i.data.publicKey;case 9:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())},resetForm:function(e){this.$refs[e].resetFields()},getExternal:function(e,t){var r=this;return Object(s["a"])(regeneratorRuntime.mark((function o(){var i,n;return regeneratorRuntime.wrap((function(o){while(1)switch(o.prev=o.next){case 0:return o.next=2,r.$http.get("v1/kms/isExternal",{params:{keyId:e}});case 2:if(i=o.sent,n=i.data,0===n.code){o.next=6;break}return o.abrupt("return",t(n.msg));case 6:return o.abrupt("return",t());case 7:case"end":return o.stop()}}),o)})))()}}},l=m,p=(r("2dcc"),r("2877")),c=Object(p["a"])(l,n,a,!1,null,"9114cddc",null),u=c.exports,d=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("el-form",{ref:"importFormRef",attrs:{model:e.importForm,rules:e.importFormRules,width:"600px","status-icon":"","label-width":"150px"}},[r("el-form-item",{attrs:{label:"密钥标识",prop:"importKeyId"}},[r("el-input",{model:{value:e.importForm.importKeyId,callback:function(t){e.$set(e.importForm,"importKeyId","string"===typeof t?t.trim():t)},expression:"importForm.importKeyId"}})],1),r("el-form-item",{attrs:{label:"导入令牌",prop:"importToken"}},[r("el-input",{attrs:{type:"textarea",rows:10},model:{value:e.importForm.importToken,callback:function(t){e.$set(e.importForm,"importToken","string"===typeof t?t.trim():t)},expression:"importForm.importToken"}})],1),r("el-form-item",{attrs:{label:"密钥材料",prop:"encryptedKeyMaterial"}},[r("el-input",{attrs:{type:"textarea",rows:10},model:{value:e.importForm.encryptedKeyMaterial,callback:function(t){e.$set(e.importForm,"encryptedKeyMaterial","string"===typeof t?t.trim():t)},expression:"importForm.encryptedKeyMaterial"}})],1),r("el-form-item",[r("el-button",{attrs:{type:"primary"},on:{click:e.submitget}},[e._v("提交")]),r("el-button",{on:{click:function(t){return e.resetForm("importFormRef")}}},[e._v("重置")])],1)],1)],1)},f=[],b={data:function(){return{importForm:{importKeyId:"",importToken:"",publicKey:""},importFormRules:{importKeyId:[{required:!0,message:"请输入密钥标识",trigger:"blur"}],importToken:[{required:!0,message:"请输入导入令牌",trigger:"blur"}],encryptedKeyMaterial:[{required:!0,message:"请输入密钥材料",trigger:"blur"}]}}},methods:{submitget:function(){var e=this;this.$refs.importFormRef.validate(function(){var t=Object(s["a"])(regeneratorRuntime.mark((function t(r){var o,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(r){t.next=2;break}return t.abrupt("return");case 2:return t.next=4,e.$http.post("v1/kms/ImportKeyMaterial",{keyId:e.importForm.importKeyId,importToken:e.importForm.importToken,encryptedKeyMaterial:e.importForm.encryptedKeyMaterial,keyMaterialExpireUnix:0});case 4:if(o=t.sent,i=o.data,0===i.code){t.next=8;break}return t.abrupt("return",e.$message.error(""!==i.msg&&null!==i.msg?i.msg:"导入主密钥（CMK）材料失败！"));case 8:e.$message.success("导入主密钥（CMK）材料成功！");case 9:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())},resetForm:function(e){this.$refs[e].resetFields()}}},y=b,g=(r("fe75"),Object(p["a"])(y,d,f,!1,null,"5a441e48",null)),v=g.exports,F={components:{MaterialGet:u,MaterialImport:v},data:function(){return{activeName:"first"}},beforeRouteEnter:function(e,t,r){var o=window.sessionStorage.getItem("accountTypeLogin");if("9"!==o)return r("/404");r()},methods:{handleClick:function(e,t){}}},k=F,h=(r("24d6"),Object(p["a"])(k,o,i,!1,null,"255e79c2",null));t["default"]=h.exports},f466:function(e,t,r){},fe75:function(e,t,r){"use strict";var o=r("1738"),i=r.n(o);i.a}}]);
//# sourceMappingURL=chunk-09f6c7cc.016b85e8.js.map