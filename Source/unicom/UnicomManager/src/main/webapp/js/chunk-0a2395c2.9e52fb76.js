(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-0a2395c2"],{"183e":function(e,t,a){"use strict";var r=a("644e"),n=a.n(r);n.a},"644e":function(e,t,a){},a908:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"appUser"},[a("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[a("el-breadcrumb-item",{attrs:{to:{path:"/home"}}},[e._v("首页")]),a("el-breadcrumb-item",[e._v("应用管理")])],1),a("el-card",[a("el-row",[a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.addDialogVisible=!0}}},[e._v("添加")])],1),a("el-table",{attrs:{data:e.userlist,stripe:"","row-key":e.getRowKeys,"expand-row-keys":e.expands},on:{"expand-change":e.expandChange}},[a("el-table-column",{attrs:{type:"expand"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-form",{staticClass:"demo-table-expand",attrs:{"label-position":"left",inline:""}},[a("el-form-item",{attrs:{label:"appKey:"}},[a("span",[e._v(e._s(""===t.row.appKey||null==t.row.appKey?"-":t.row.appKey))])])],1),a("el-form",{staticClass:"demo-table-expand",attrs:{"label-position":"left",inline:""}},[a("el-form-item",{attrs:{label:"appSecret:"}},[a("span",[e._v(e._s(""===t.row.appSecret||null==t.row.appSecret?"-":t.row.appSecret))])])],1)]}}])}),a("el-table-column",{attrs:{type:"index",label:"序号"}}),a("el-table-column",{attrs:{label:"应用名称",prop:"appName","show-overflow-tooltip":!0}}),a("el-table-column",{attrs:{label:"应用类型",prop:"appType"},scopedSlots:e._u([{key:"default",fn:function(t){return[1===t.row.appType?a("span",[e._v("专用应用")]):2===t.row.appType?a("span",[e._v("通用应用")]):e._e()]}}])}),a("el-table-column",{attrs:{label:"备注",prop:"comments","show-overflow-tooltip":!0},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(""===t.row.comments||null==t.row.comments?"-":t.row.comments))])]}}])}),a("el-table-column",{attrs:{label:"创建时间",prop:"createTime","show-overflow-tooltip":!0}}),a("el-table-column",{attrs:{label:"操作",width:"400px"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"danger",size:"mini"},on:{click:function(a){return e.deleteByName(t.row.appId)}}},[e._v("删除")]),a("el-button",{attrs:{type:"success",size:"mini"},on:{click:function(a){return e.goDeviceDetail(t.row.appId,t.row.appType)}}},[e._v("终端列表 ")]),a("el-button",{attrs:{type:"warning",size:"mini"},on:{click:function(a){return e.goAppList(t.row.appId)}}},[e._v("绑定应用管理员")]),1===t.row.appType?a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(a){return e.goDeviceConfig(t.row.appId)}}},[e._v("配置 ")]):e._e()]}}])})],1),a("el-pagination",{attrs:{"current-page":e.queryInfo.pagenum,"page-sizes":[5,10,15,20],"page-size":e.queryInfo.pagesize,layout:"total, sizes, prev, pager, next, jumper",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1),a("el-dialog",{attrs:{title:"添加应用",visible:e.addDialogVisible,width:"520px"},on:{"update:visible":function(t){e.addDialogVisible=t},close:e.addDialogClosed}},[a("el-form",{ref:"addFormRef",staticStyle:{width:"80%",margin:"20px auto"},attrs:{model:e.addForm,rules:e.addFormRules,"label-width":"80px"}},[a("el-form-item",{attrs:{label:"应用名称",prop:"loginName"}},[a("el-input",{model:{value:e.addForm.loginName,callback:function(t){e.$set(e.addForm,"loginName","string"===typeof t?t.trim():t)},expression:"addForm.loginName"}})],1),a("el-form-item",{attrs:{label:"应用类型",prop:"appType"}},[a("el-radio-group",{on:{change:e.radioChange},model:{value:e.addForm.appType,callback:function(t){e.$set(e.addForm,"appType","string"===typeof t?t.trim():t)},expression:"addForm.appType"}},[a("el-radio",{attrs:{label:1}},[e._v("专用应用")]),a("el-radio",{attrs:{label:2}},[e._v("通用应用")])],1)],1),a("el-form-item",{attrs:{label:"备注",prop:"comments"}},[a("el-input",{attrs:{type:"textarea",maxlength:"200","show-word-limit":"",rows:5},model:{value:e.addForm.comments,callback:function(t){e.$set(e.addForm,"comments","string"===typeof t?t.trim():t)},expression:"addForm.comments"}})],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.addDialogVisible=!1}}},[e._v("取 消")]),a("el-button",{directives:[{name:"preventReClick",rawName:"v-preventReClick",value:1e3,expression:"1000"}],attrs:{type:"primary"},on:{click:e.submitAdd}},[e._v("确 定")])],1)],1)],1)},n=[],o=(a("99af"),a("96cf"),a("1da1")),s={data:function(){return{isShow:"",userlist:[],queryInfo:{pagenum:1,pagesize:10},total:0,expands:[],getRowKeys:function(e){return e.appId},addDialogVisible:!1,addForm:{loginName:"",appType:null,comments:""},addFormRules:{loginName:[{required:!0,message:"请输入应用名",trigger:"blur"},{min:2,max:16,message:"长度为2-16位",trigger:"blur"}],appType:[{required:!0,message:"请选择应用类型",trigger:"change"}],comments:[{min:0,max:200,message:"长度在200个字符以内",trigger:"blur"}]}}},beforeRouteEnter:function(e,t,a){var r=window.sessionStorage.getItem("accountTypeLogin");if("9"!==r)return a("/404");a()},created:function(){this.getUserList()},methods:{getUserList:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var a,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$http.get("app/getApps/".concat(e.queryInfo.pagenum,"/").concat(e.queryInfo.pagesize,"?ts=").concat((new Date).getTime()));case 2:if(a=t.sent,r=a.data,0===r.code){t.next=6;break}return t.abrupt("return",e.$message.error("获取用户信息失败！"));case 6:e.userlist=r.data.list,e.total=r.data.total;case 8:case"end":return t.stop()}}),t)})))()},handleSizeChange:function(e){this.queryInfo.pagesize=e,this.getUserList()},handleCurrentChange:function(e){this.queryInfo.pagenum=e,this.getUserList()},expandChange:function(e,t){t.length?(this.expands=[],e&&this.expands.push(e.appId)):this.expands=[]},addDialogClosed:function(){this.$refs.addFormRef.resetFields()},submitAdd:function(){var e=this;this.$refs.addFormRef.validate(function(){var t=Object(o["a"])(regeneratorRuntime.mark((function t(a){var r,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(a){t.next=2;break}return t.abrupt("return");case 2:return t.next=4,e.$http.post("app/addApp",{appName:e.addForm.loginName,appType:e.addForm.appType,comments:e.addForm.comments});case 4:if(r=t.sent,n=r.data,0===n.code){t.next=8;break}return t.abrupt("return",e.$message.error("添加失败!"));case 8:e.$message.success("添加成功!"),e.addDialogVisible=!1,e.getUserList();case 11:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())},deleteByName:function(e){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function a(){var r,n,o;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,t.$confirm("此操作将删除该应用，是否继续？","提示",{confirmButtonText:"确定",cancelButtontext:"取消",type:"warning"}).catch((function(e){return e}));case 2:if(r=a.sent,"confirm"===r){a.next=5;break}return a.abrupt("return");case 5:return a.next=7,t.$http.get("app/deleteApp",{params:{appId:e}});case 7:if(n=a.sent,o=n.data,0===o.code){a.next=11;break}return a.abrupt("return",t.$message.error("删除失败！"));case 11:t.$message.success("删除成功！"),t.getUserList();case 13:case"end":return a.stop()}}),a)})))()},radioChange:function(e){this.addForm.comments=1===e?"密钥云终端形式":"标准协议形式"},goDeviceDetail:function(e,t){this.$router.push({path:"/pwsp",query:{id:e,type:t}})},goDeviceConfig:function(e){this.$router.push({path:"/qems",query:{id:e}})},goAppList:function(e){this.$router.push({path:"/appList",query:{id:e}})}}},i=s,p=(a("183e"),a("2877")),l=Object(p["a"])(i,r,n,!1,null,"4c91cdd3",null);t["default"]=l.exports}}]);
//# sourceMappingURL=chunk-0a2395c2.9e52fb76.js.map